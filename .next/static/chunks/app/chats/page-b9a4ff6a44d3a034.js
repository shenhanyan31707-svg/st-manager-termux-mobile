(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{243:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(5155),r=a(4269);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...a})}},508:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1647:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var s=a(5155);a(2115);var r=a(3101),n=a(4269);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-emerald-500/15 text-emerald-700 dark:text-emerald-400",warning:"border-transparent bg-amber-500/15 text-amber-700 dark:text-amber-400"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...r})}},3963:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var s=a(5155),r=a(2115),n=a(7012),l=a(4269),i=a(5142),c=a(3998),d=a(1647),o=a(6948),m=a(243),u=a(8053),x=a(6651),h=a(7586),p=a(1360),f=a(1847);let g=(0,f.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var v=a(8720),y=a(5626),j=a(508);let N=(0,f.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var b=a(5707);let w=(0,f.A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),k=(0,f.A)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),C=(0,f.A)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),A=(0,f.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function M(e){let{character:t,filename:a,onBack:i}=e,[u,x]=(0,r.useState)(1),{data:h,isLoading:p}=(0,n.gf)("/api/chats/".concat(encodeURIComponent(t),"/").concat(encodeURIComponent(a),"?page=").concat(u,"&pageSize=50"));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(c.$,{variant:"ghost",onClick:i,className:"gap-2 mb-2",children:[(0,s.jsx)(y.A,{className:"h-4 w-4"}),"返回对话列表"]}),(0,s.jsx)("h2",{className:"text-xl font-bold tracking-tight truncate",children:a.replace(".jsonl","")}),(null==h?void 0:h.metadata)&&(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground mt-1",children:[(0,s.jsx)("span",{children:h.metadata.character_name}),(0,s.jsx)("span",{children:"\xb7"}),(0,s.jsxs)("span",{children:[h.pagination.totalMessages," 条消息"]})]})]}),p&&(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>(0,s.jsx)(m.E,{className:"h-24 w-full rounded-lg"},t))}),!p&&h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"space-y-3",children:h.messages.map((e,t)=>{var a,r,n,i;return(0,s.jsx)(o.Zp,{className:(0,l.cn)("transition-colors",e.is_user?"border-blue-500/20 bg-blue-500/5":"border-purple-500/20 bg-purple-500/5",e.is_system&&"border-amber-500/20 bg-amber-500/5"),children:(0,s.jsx)(o.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:(0,l.cn)("h-8 w-8 rounded-full flex items-center justify-center shrink-0 mt-0.5",e.is_user?"bg-blue-500/20":"bg-purple-500/20",e.is_system&&"bg-amber-500/20"),children:e.is_user?(0,s.jsx)(j.A,{className:"h-4 w-4 text-blue-500"}):e.is_system?(0,s.jsx)(b.A,{className:"h-4 w-4 text-amber-500"}):(0,s.jsx)(w,{className:"h-4 w-4 text-purple-500"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,s.jsx)("span",{className:"font-medium text-sm",children:e.name}),e.send_date&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(N,{className:"h-3 w-3"}),e.send_date]}),(null==(a=e.extra)?void 0:a.model)&&(0,s.jsx)(d.E,{variant:"outline",className:"text-[10px] h-4 font-mono",children:e.extra.model}),(null==(r=e.extra)?void 0:r.token_count)&&(0,s.jsxs)(d.E,{variant:"secondary",className:"text-[10px] h-4",children:[(0,s.jsx)(k,{className:"h-2.5 w-2.5 mr-0.5"}),e.extra.token_count]}),e.swipes&&e.swipes.length>1&&(0,s.jsxs)(d.E,{variant:"secondary",className:"text-[10px] h-4",children:["Swipe ",(null!=(i=e.swipe_id)?i:0)+1,"/",e.swipes.length]})]}),(null==(n=e.extra)?void 0:n.reasoning)&&(0,s.jsxs)("details",{className:"mb-2",children:[(0,s.jsxs)("summary",{className:"text-xs text-muted-foreground cursor-pointer flex items-center gap-1 hover:text-foreground",children:[(0,s.jsx)(C,{className:"h-3 w-3"}),"思考过程"]}),(0,s.jsx)("div",{className:"mt-1.5 p-2 bg-muted/50 rounded text-xs font-mono whitespace-pre-wrap max-h-48 overflow-y-auto",children:e.extra.reasoning})]}),(0,s.jsx)("div",{className:"text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none break-words",dangerouslySetInnerHTML:{__html:e.mes}})]})]})})},"".concat(u,"-").concat(t))})}),h.pagination.totalPages>1&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3 pt-4",children:[(0,s.jsxs)(c.$,{variant:"outline",size:"sm",disabled:u<=1,onClick:()=>x(e=>e-1),children:[(0,s.jsx)(A,{className:"h-4 w-4 mr-1"}),"上一页"]}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["第 ",h.pagination.page," / ",h.pagination.totalPages," 页"]}),(0,s.jsxs)(c.$,{variant:"outline",size:"sm",disabled:u>=h.pagination.totalPages,onClick:()=>x(e=>e+1),children:["下一页",(0,s.jsx)(g,{className:"h-4 w-4 ml-1"})]})]})]})]})}function _(e){var t;let{character:a,onBack:i}=e,{data:x,isLoading:f,mutate:g}=(0,n.gf)("/api/chats/".concat(encodeURIComponent(a))),[b,w]=(0,r.useState)(null),[k,C]=(0,r.useState)(!1),[A,_]=(0,r.useState)(null),E=async()=>{if(b){C(!0);try{await (0,n.Al)("/api/chats/".concat(encodeURIComponent(a),"?file=").concat(encodeURIComponent(b))),v.o.success("对话已删除",{description:"备份已保存"}),g()}catch(e){v.o.error("删除失败",{description:String(e)})}finally{C(!1),w(null)}}};return A?(0,s.jsx)(M,{character:a,filename:A,onBack:()=>_(null)}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(c.$,{variant:"ghost",onClick:i,className:"gap-2 mb-2",children:[(0,s.jsx)(y.A,{className:"h-4 w-4"}),"返回角色列表"]}),(0,s.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:a}),(0,s.jsxs)("p",{className:"text-muted-foreground text-sm",children:["共 ",null!=(t=null==x?void 0:x.length)?t:0," 个对话"]})]}),f&&(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:5}).map((e,t)=>(0,s.jsx)(m.E,{className:"h-20 w-full rounded-lg"},t))}),!f&&(0,s.jsx)("div",{className:"space-y-2",children:null==x?void 0:x.map(e=>(0,s.jsx)(o.Zp,{className:"hover:bg-accent/30 transition-colors cursor-pointer group",onClick:()=>_(e.filename),children:(0,s.jsx)(o.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-md bg-blue-500/10 flex items-center justify-center shrink-0 mt-0.5",children:(0,s.jsx)(h.A,{className:"h-5 w-5 text-blue-500"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,s.jsx)("h3",{className:"font-medium text-sm truncate",children:e.filename.replace(".jsonl","")})}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-1.5",children:[e.userName&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(j.A,{className:"h-3 w-3"}),e.userName]}),e.createDate&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(N,{className:"h-3 w-3"}),(0,l.Yq)(e.createDate)]}),(0,s.jsx)("span",{children:(0,l.v7)(e.size)})]}),e.preview&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-1",children:e.preview})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,s.jsxs)(d.E,{variant:"secondary",children:[e.messageCount," 条"]}),(0,s.jsx)(c.$,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:t=>{t.stopPropagation(),w(e.filename)},children:(0,s.jsx)(p.A,{className:"h-4 w-4 text-destructive"})})]})]})})},e.filename))}),!f&&(!x||0===x.length)&&(0,s.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"暂无对话"}),(0,s.jsx)(u.Lt,{open:!!b,onOpenChange:()=>w(null),children:(0,s.jsxs)(u.EO,{children:[(0,s.jsxs)(u.wd,{children:[(0,s.jsx)(u.r7,{children:"确认删除对话"}),(0,s.jsx)(u.$v,{children:"你确定要删除这个对话吗？文件将被备份到 _manager_backups 目录。"})]}),(0,s.jsxs)(u.ck,{children:[(0,s.jsx)(u.Zr,{disabled:k,children:"取消"}),(0,s.jsx)(u.Rx,{onClick:E,disabled:k,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:k?"删除中...":"确认删除"})]})]})})]})}function E(){var e,t;let{data:a,isLoading:f,mutate:y}=(0,n.gf)("/api/chats"),[j,N]=(0,r.useState)(""),[b,w]=(0,r.useState)(null),[k,C]=(0,r.useState)(null),[A,M]=(0,r.useState)(!1),E=(0,r.useMemo)(()=>{if(!a)return[];if(!j)return a;let e=j.toLowerCase();return a.filter(t=>t.character.toLowerCase().includes(e))},[a,j]),R=null!=(e=null==a?void 0:a.reduce((e,t)=>e+t.chatCount,0))?e:0,z=async()=>{if(k){M(!0);try{await (0,n.Al)("/api/chats/".concat(encodeURIComponent(k))),v.o.success("聊天记录已删除",{description:"备份已保存到 _manager_backups"}),y()}catch(e){v.o.error("删除失败",{description:String(e)})}finally{M(!1),C(null)}}};return b?(0,s.jsx)(_,{character:b,onBack:()=>{w(null),y()}}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"聊天记录"}),(0,s.jsxs)("p",{className:"text-muted-foreground mt-1",children:[null!=(t=null==a?void 0:a.length)?t:0," 个角色 \xb7 共 ",R," 个对话"]})]}),(0,s.jsxs)("div",{className:"relative max-w-sm",children:[(0,s.jsx)(x.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(i.p,{placeholder:"搜索角色...",value:j,onChange:e=>N(e.target.value),className:"pl-10"})]}),f&&(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:8}).map((e,t)=>(0,s.jsx)(m.E,{className:"h-16 w-full rounded-lg"},t))}),!f&&(0,s.jsx)("div",{className:"space-y-2",children:E.map(e=>(0,s.jsx)(o.Zp,{className:"hover:bg-accent/30 transition-colors cursor-pointer group",onClick:()=>w(e.character),children:(0,s.jsxs)(o.Wu,{className:"flex items-center gap-4 p-4",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-md bg-purple-500/10 flex items-center justify-center shrink-0",children:(0,s.jsx)(h.A,{className:"h-5 w-5 text-purple-500"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-medium text-sm truncate",children:e.character}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["最近: ",new Date(e.latestChat).toLocaleDateString("zh-CN")," \xb7 ",(0,l.v7)(e.totalSize)]})]}),(0,s.jsxs)(d.E,{variant:"secondary",className:"shrink-0",children:[e.chatCount," 对话"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(c.$,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:t=>{t.stopPropagation(),C(e.character)},children:(0,s.jsx)(p.A,{className:"h-4 w-4 text-destructive"})}),(0,s.jsx)(g,{className:"h-4 w-4 text-muted-foreground"})]})]})},e.character))}),!f&&0===E.length&&(0,s.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:j?"没有找到匹配的角色":"暂无聊天记录"}),(0,s.jsx)(u.Lt,{open:!!k,onOpenChange:()=>C(null),children:(0,s.jsxs)(u.EO,{children:[(0,s.jsxs)(u.wd,{children:[(0,s.jsx)(u.r7,{children:"确认删除所有聊天"}),(0,s.jsxs)(u.$v,{children:["你确定要删除 ",(0,s.jsx)("strong",{children:k})," 的所有聊天记录吗？",(0,s.jsx)("br",{}),"整个聊天文件夹将被备份到 _manager_backups 目录。"]})]}),(0,s.jsxs)(u.ck,{children:[(0,s.jsx)(u.Zr,{disabled:A,children:"取消"}),(0,s.jsx)(u.Rx,{onClick:z,disabled:A,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:A?"删除中...":"确认全部删除"})]})]})})]})}},3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>c});var s=a(5155),r=a(2115),n=a(2467),l=a(3101),i=a(4269);let c=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:d=!1,...o}=e,m=d?n.DX:"button";return(0,s.jsx)(m,{className:(0,i.cn)(c({variant:r,size:l,className:a})),ref:t,...o})});d.displayName="Button"},4269:(e,t,a)=>{"use strict";a.d(t,{Yq:()=>i,cn:()=>n,v7:()=>l});var s=a(2821),r=a(5889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}function l(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]}function i(e){try{let t=new Date(e);if(isNaN(t.getTime())){let t=e.match(/(\d{4}-\d{2}-\d{2})@(\d{2})h(\d{2})m(\d{2})s/);if(t)return"".concat(t[1]," ").concat(t[2],":").concat(t[3],":").concat(t[4]);return e}return t.toLocaleString("zh-CN")}catch(t){return e}}},4747:(e,t,a)=>{Promise.resolve().then(a.bind(a,3963))},5142:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(5155),r=a(2115),n=a(4269);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},5626:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5707:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]])},6948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>i});var s=a(5155),r=a(2115),n=a(4269);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},7012:(e,t,a)=>{"use strict";a.d(t,{Al:()=>l,gf:()=>n,mu:()=>i});var s=a(7815);let r=async e=>{let t=await fetch(e);if(!t.ok)throw Error("API request failed");let a=await t.json();if(!a.success)throw Error(a.error||"Unknown error");return a.data};function n(e,t){return(0,s.Ay)(e,r,{revalidateOnFocus:!0,dedupingInterval:5e3,keepPreviousData:!0,...t})}async function l(e){let t=await fetch(e,{method:"DELETE"}),a=await t.json();if(!a.success)throw Error(a.error||"Delete failed")}async function i(e,t){let a=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await a.json();if(!s.success)throw Error(s.error||"Update failed");return s.data}},7586:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},8053:(e,t,a)=>{"use strict";a.d(t,{$v:()=>p,EO:()=>m,Lt:()=>c,Rx:()=>f,Zr:()=>g,ck:()=>x,r7:()=>h,wd:()=>u});var s=a(5155),r=a(2115),n=a(2498),l=a(4269),i=a(3998);let c=n.bL;n.l9;let d=n.ZL,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});o.displayName=n.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(o,{}),(0,s.jsx)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});m.displayName=n.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})},x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})},h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold",a),...r})});h.displayName=n.hE.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=n.VY.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.rc,{ref:t,className:(0,l.cn)((0,i.r)(),a),...r})});f.displayName=n.rc.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.ZD,{ref:t,className:(0,l.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});g.displayName=n.ZD.displayName}},e=>{e.O(0,[545,815,720,107,297,441,255,358],()=>e(e.s=4747)),_N_E=e.O()}]);