(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{1647:(e,r,t)=>{"use strict";t.d(r,{E:()=>l});var a=t(5155);t(2115);var s=t(3101),n=t(4269);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-emerald-500/15 text-emerald-700 dark:text-emerald-400",warning:"border-transparent bg-amber-500/15 text-amber-700 dark:text-amber-400"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),r),...s})}},3998:(e,r,t)=>{"use strict";t.d(r,{$:()=>o,r:()=>d});var a=t(5155),s=t(2115),n=t(2467),i=t(3101),l=t(4269);let d=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(d({variant:s,size:i,className:t})),ref:r,...c})});o.displayName="Button"},4269:(e,r,t)=>{"use strict";t.d(r,{Yq:()=>l,cn:()=>n,v7:()=>i});var a=t(2821),s=t(5889);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}function i(e){if(0===e)return"0 B";let r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(1))+" "+["B","KB","MB","GB"][r]}function l(e){try{let r=new Date(e);if(isNaN(r.getTime())){let r=e.match(/(\d{4}-\d{2}-\d{2})@(\d{2})h(\d{2})m(\d{2})s/);if(r)return"".concat(r[1]," ").concat(r[2],":").concat(r[3],":").concat(r[4]);return e}return r.toLocaleString("zh-CN")}catch(r){return e}}},5142:(e,r,t)=>{"use strict";t.d(r,{p:()=>i});var a=t(5155),s=t(2115),n=t(4269);let i=s.forwardRef((e,r)=>{let{className:t,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},6046:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(1847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6259:(e,r,t)=>{"use strict";t.d(r,{w:()=>l});var a=t(5155),s=t(2115),n=t(7321),i=t(4269);let l=s.forwardRef((e,r)=>{let{className:t,orientation:s="horizontal",decorative:l=!0,...d}=e;return(0,a.jsx)(n.b,{ref:r,decorative:l,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...d})});l.displayName=n.b.displayName},6567:(e,r,t)=>{Promise.resolve().then(t.bind(t,7788))},6948:(e,r,t)=>{"use strict";t.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l});var a=t(5155),s=t(2115),n=t(4269);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});i.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},7012:(e,r,t)=>{"use strict";t.d(r,{Al:()=>i,gf:()=>n,mu:()=>l});var a=t(7815);let s=async e=>{let r=await fetch(e);if(!r.ok)throw Error("API request failed");let t=await r.json();if(!t.success)throw Error(t.error||"Unknown error");return t.data};function n(e,r){return(0,a.Ay)(e,s,{revalidateOnFocus:!0,dedupingInterval:5e3,keepPreviousData:!0,...r})}async function i(e){let r=await fetch(e,{method:"DELETE"}),t=await r.json();if(!t.success)throw Error(t.error||"Delete failed")}async function l(e,r){let t=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),a=await t.json();if(!a.success)throw Error(a.error||"Update failed");return a.data}},7321:(e,r,t)=>{"use strict";t.d(r,{b:()=>c});var a=t(2115);t(7650);var s=t(2467),n=t(5155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,s.TL)(`Primitive.${r}`),i=a.forwardRef((e,a)=>{let{asChild:s,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(s?t:r,{...i,ref:a})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{}),l="horizontal",d=["horizontal","vertical"],o=a.forwardRef((e,r)=>{var t;let{decorative:a,orientation:s=l,...o}=e,c=(t=s,d.includes(t))?s:l;return(0,n.jsx)(i.div,{"data-orientation":c,...a?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:r})});o.displayName="Separator";var c=o},7788:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var a=t(5155),s=t(2115),n=t(7012),i=t(3998),l=t(5142),d=t(6948),o=t(1647),c=t(6259),u=t(1847);let f=(0,u.A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),m=(0,u.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),x=(0,u.A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),h=(0,u.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var p=t(6046),v=t(8720);function g(){let{data:e,isLoading:r,mutate:t}=(0,n.gf)("/api/config"),[u,g]=(0,s.useState)(""),[y,b]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[w,k]=(0,s.useState)(null);s.useEffect(()=>{(null==e?void 0:e.dataPath)&&g(e.dataPath)},[e]);let C=async()=>{b(!0);try{await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataPath:u})}),v.o.success("閰嶇疆宸蹭繚瀛?,{description:"鍒锋柊椤甸潰鍚庣敓鏁?}),t(),setTimeout(()=>{confirm("閰嶇疆宸蹭繚瀛橈紒闇€瑕佸埛鏂伴〉闈娇鍏剁敓鏁堬紝鏄惁绔嬪嵆鍒锋柊锛?)&&window.location.reload()},500)}catch(e){v.o.error("淇濆瓨澶辫触",{description:String(e)})}finally{b(!1)}},S=async()=>{N(!0),k(null);try{let e=u.replace(/\\/g,"/"),r=await fetch("/api/config/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataPath:e})}),t=await r.json();t.success?(k("success"),v.o.success("璺緞鏈夋晥",{description:"鎵惧埌 ".concat(t.data.characterCount," 涓鑹?)})):(k("error"),v.o.error("璺緞鏃犳晥",{description:t.error}))}catch(e){k("error"),v.o.error("娴嬭瘯澶辫触",{description:String(e)})}finally{N(!1)}};return(0,a.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"璁剧疆"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"閰嶇疆 SillyTavern 鏁版嵁鐩綍鍜屽簲鐢ㄩ€夐」"})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:"h-5 w-5"}),"鏁版嵁鐩綍"]}),(0,a.jsx)(d.BT,{children:"璁剧疆 SillyTavern 鐢ㄦ埛鏁版嵁鏂囦欢澶圭殑瀹屾暣璺緞"})]}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[e&&(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg text-sm space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"褰撳墠閰嶇疆璺緞"}),(0,a.jsx)(o.E,{variant:"secondary",children:e.dataPath})]})}),(0,a.jsx)(c.w,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"鏁版嵁鐩綍璺緞"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.p,{value:u,onChange:e=>g(e.target.value),placeholder:"/storage/emulated/0/SillyTavern/default-user",className:"font-mono text-sm"}),(0,a.jsx)(i.$,{variant:"outline",onClick:()=>{v.o.info("鎻愮ず",{description:"璇锋墜鍔ㄨ緭鍏ュ畬鏁磋矾寰勶紝渚嬪锛/storage/emulated/0/SillyTavern/default-user"})},className:"shrink-0",children:(0,a.jsx)(f,{className:"h-4 w-4"})})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"\uD83D\uDCA1 浣跨敤姝ｆ枩鏉?(/) 鎴栧弻鍙嶆枩鏉?(\\\\) 浣滀负璺緞鍒嗛殧绗?})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(i.$,{variant:"outline",onClick:S,disabled:j||!u,className:"gap-2",children:[j?(0,a.jsx)(m,{className:"h-4 w-4 animate-spin"}):"success"===w?(0,a.jsx)(x,{className:"h-4 w-4 text-emerald-500"}):"error"===w?(0,a.jsx)(h,{className:"h-4 w-4 text-destructive"}):(0,a.jsx)(h,{className:"h-4 w-4"}),"娴嬭瘯璺緞"]}),(0,a.jsxs)(i.$,{onClick:C,disabled:y||!u,className:"gap-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),y?"淇濆瓨涓?..":"淇濆瓨閰嶇疆"]})]}),(0,a.jsx)("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg text-sm space-y-1",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(h,{className:"h-4 w-4 text-amber-500 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"font-medium text-amber-700 dark:text-amber-400",children:"娉ㄦ剰浜嬮」"}),(0,a.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-0.5 ml-4 list-disc",children:[(0,a.jsx)("li",{children:"纭繚璺緞鎸囧悜鍖呭惈 characters銆亀orlds銆乧hats 绛夋枃浠跺す鐨勭洰褰?}),(0,a.jsx)("li",{children:"淇敼鍚庨渶瑕佸埛鏂伴〉闈㈡墠鑳界敓鏁?}),(0,a.jsx)("li",{children:"鍘?.env.local 閰嶇疆浠嶄細浣滀负榛樿鍊?})]})]})]})})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"鍏充簬 ST Manager"}),(0,a.jsx)(d.BT,{children:"鐗堟湰淇℃伅鍜屽府鍔?})]}),(0,a.jsxs)(d.Wu,{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"鐗堟湰"}),(0,a.jsx)("span",{className:"font-mono",children:"0.1.0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"妗嗘灦"}),(0,a.jsx)("span",{children:"Next.js 15 + TypeScript"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"UI"}),(0,a.jsx)("span",{children:"Tailwind CSS + shadcn/ui"})]}),(0,a.jsx)(c.w,{}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"\uD83D\uDCA1 宸︿笅瑙掔殑 Next.js logo 鏄紑鍙戞ā寮忕殑缂栬瘧鐘舵€佹寚绀哄櫒"})]})]})]})}}},e=>{e.O(0,[545,815,720,441,255,358],()=>e(e.s=6567)),_N_E=e.O()}]);